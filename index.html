<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í¬ì¼“ëª¬ ë°°í‹€ ê²Œì„</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            max-width: 800px;
            width: 100%;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .screen {
            display: none;
        }

        .screen.active {
            display: block;
        }

        /* ì‹œì‘ í™”ë©´ */
        .start-screen {
            padding: 60px 40px;
            text-align: center;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .start-screen h1 {
            font-size: 3em;
            color: white;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            margin-bottom: 30px;
        }

        .pokemon-select {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            margin: 40px 0;
        }

        .pokemon-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
        }

        .pokemon-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .pokemon-card.selected {
            border-color: #4CAF50;
            background: #e8f5e9;
        }

        .pokemon-card img {
            width: 120px;
            height: 120px;
            font-size: 80px;
            margin-bottom: 10px;
        }

        .pokemon-card h3 {
            color: #333;
            margin-bottom: 5px;
        }

        .pokemon-card .type {
            background: #2196F3;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            display: inline-block;
        }

        .type.fire { background: #ff6b6b; }
        .type.water { background: #4ecdc4; }
        .type.grass { background: #95e1d3; }
        .type.electric { background: #f9ca24; color: #333; }

        .start-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 15px 50px;
            font-size: 1.3em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
        }

        .start-btn:hover {
            background: #45a049;
            transform: scale(1.05);
        }

        .start-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: scale(1);
        }

        /* ë°°í‹€ í™”ë©´ */
        .battle-screen {
            padding: 40px;
            background: linear-gradient(to bottom, #87CEEB 0%, #98D8C8 100%);
        }

        .battle-field {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
        }

        .pokemon-display {
            flex: 1;
            text-align: center;
        }

        .enemy {
            animation: slideInRight 0.5s;
        }

        .player {
            animation: slideInLeft 0.5s;
        }

        @keyframes slideInRight {
            from { transform: translateX(100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideInLeft {
            from { transform: translateX(-100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .pokemon-sprite {
            font-size: 100px;
            margin-bottom: 20px;
            display: inline-block;
        }

        .attack-animation {
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .pokemon-info {
            background: white;
            border-radius: 15px;
            padding: 15px;
            margin: 0 20px;
        }

        .pokemon-name {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }

        .hp-bar-container {
            background: #ddd;
            height: 25px;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 5px;
        }

        .hp-bar {
            background: linear-gradient(to right, #4CAF50, #8BC34A);
            height: 100%;
            transition: width 0.5s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .hp-bar.low {
            background: linear-gradient(to right, #ff6b6b, #ee5a6f);
        }

        .hp-bar.critical {
            background: linear-gradient(to right, #c0392b, #e74c3c);
            animation: pulse 0.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .battle-message {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            min-height: 80px;
            font-size: 1.1em;
            color: #333;
            border: 3px solid #333;
        }

        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .action-btn {
            background: #2196F3;
            color: white;
            border: none;
            padding: 20px;
            font-size: 1.1em;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .action-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .action-btn.attack { background: #ff6b6b; }
        .action-btn.defend { background: #4ecdc4; }
        .action-btn.heal { background: #95e1d3; }
        .action-btn.special { background: #f9ca24; color: #333; }

        /* ê²°ê³¼ í™”ë©´ */
        .result-screen {
            padding: 60px 40px;
            text-align: center;
        }

        .result-screen.win {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .result-screen.lose {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .result-screen h2 {
            font-size: 3em;
            color: white;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .result-screen p {
            font-size: 1.5em;
            color: white;
            margin-bottom: 40px;
        }

        .restart-btn {
            background: white;
            color: #667eea;
            border: none;
            padding: 15px 50px;
            font-size: 1.3em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .restart-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- ì‹œì‘ í™”ë©´ -->
        <div class="screen active start-screen">
            <h1>âš¡ í¬ì¼“ëª¬ ë°°í‹€ âš¡</h1>
            <p style="color: white; font-size: 1.2em; margin-bottom: 20px;">ë‹¹ì‹ ì˜ í¬ì¼“ëª¬ì„ ì„ íƒí•˜ì„¸ìš”!</p>
            
            <div class="pokemon-select">
                <div class="pokemon-card" data-pokemon="pikachu">
                    <div class="pokemon-sprite">âš¡</div>
                    <h3>í”¼ì¹´ì¸„</h3>
                    <span class="type electric">ì „ê¸°</span>
                    <p style="margin-top: 10px; color: #666;">HP: 100 | ê³µê²©: 25</p>
                </div>
                <div class="pokemon-card" data-pokemon="charizard">
                    <div class="pokemon-sprite">ğŸ”¥</div>
                    <h3>ë¦¬ìëª½</h3>
                    <span class="type fire">ë¶ˆê½ƒ</span>
                    <p style="margin-top: 10px; color: #666;">HP: 120 | ê³µê²©: 30</p>
                </div>
                <div class="pokemon-card" data-pokemon="blastoise">
                    <div class="pokemon-sprite">ğŸ’§</div>
                    <h3>ê±°ë¶ì™•</h3>
                    <span class="type water">ë¬¼</span>
                    <p style="margin-top: 10px; color: #666;">HP: 110 | ê³µê²©: 28</p>
                </div>
            </div>

            <button class="start-btn" disabled>ë°°í‹€ ì‹œì‘!</button>
        </div>

        <!-- ë°°í‹€ í™”ë©´ -->
        <div class="screen battle-screen">
            <div class="battle-field">
                <div class="pokemon-display enemy">
                    <div class="pokemon-sprite" id="enemySprite">ğŸ”¥</div>
                    <div class="pokemon-info">
                        <div class="pokemon-name" id="enemyName">ì•¼ìƒì˜ ë¦¬ìëª½</div>
                        <div class="hp-bar-container">
                            <div class="hp-bar" id="enemyHp" style="width: 100%;">100/100</div>
                        </div>
                    </div>
                </div>

                <div class="pokemon-display player">
                    <div class="pokemon-sprite" id="playerSprite">âš¡</div>
                    <div class="pokemon-info">
                        <div class="pokemon-name" id="playerName">í”¼ì¹´ì¸„</div>
                        <div class="hp-bar-container">
                            <div class="hp-bar" id="playerHp" style="width: 100%;">100/100</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="battle-message" id="battleMessage">
                ì•¼ìƒì˜ í¬ì¼“ëª¬ì´ ë‚˜íƒ€ë‚¬ë‹¤! ì–´ë–»ê²Œ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?
            </div>

            <div class="action-buttons">
                <button class="action-btn attack" onclick="playerAttack()">âš”ï¸ ê³µê²©í•˜ê¸°</button>
                <button class="action-btn defend" onclick="playerDefend()">ğŸ›¡ï¸ ë°©ì–´í•˜ê¸°</button>
                <button class="action-btn heal" onclick="playerHeal()">ğŸ’š íšŒë³µí•˜ê¸°</button>
                <button class="action-btn special" onclick="playerSpecial()">âœ¨ í•„ì‚´ê¸°</button>
            </div>
        </div>

        <!-- ê²°ê³¼ í™”ë©´ -->
        <div class="screen result-screen">
            <h2 id="resultTitle">ìŠ¹ë¦¬!</h2>
            <p id="resultMessage">ì¶•í•˜í•©ë‹ˆë‹¤! ì•¼ìƒì˜ í¬ì¼“ëª¬ì„ ë¬¼ë¦¬ì³¤ìŠµë‹ˆë‹¤!</p>
            <button class="restart-btn" onclick="restartGame()">ë‹¤ì‹œ ì‹œì‘</button>
        </div>
    </div>

    <script>
        const pokemonData = {
            pikachu: { name: 'í”¼ì¹´ì¸„', sprite: 'âš¡', maxHp: 100, attack: 25, type: 'ì „ê¸°' },
            charizard: { name: 'ë¦¬ìëª½', sprite: 'ğŸ”¥', maxHp: 120, attack: 30, type: 'ë¶ˆê½ƒ' },
            blastoise: { name: 'ê±°ë¶ì™•', sprite: 'ğŸ’§', maxHp: 110, attack: 28, type: 'ë¬¼' }
        };

        let selectedPokemon = null;
        let playerPokemon = null;
        let enemyPokemon = null;
        let isDefending = false;
        let healCount = 3;

        // í¬ì¼“ëª¬ ì„ íƒ
        document.querySelectorAll('.pokemon-card').forEach(card => {
            card.addEventListener('click', function() {
                document.querySelectorAll('.pokemon-card').forEach(c => c.classList.remove('selected'));
                this.classList.add('selected');
                selectedPokemon = this.dataset.pokemon;
                document.querySelector('.start-btn').disabled = false;
            });
        });

        // ê²Œì„ ì‹œì‘
        document.querySelector('.start-btn').addEventListener('click', startBattle);

        function startBattle() {
            if (!selectedPokemon) return;

            // í”Œë ˆì´ì–´ í¬ì¼“ëª¬ ì„¤ì •
            const playerData = pokemonData[selectedPokemon];
            playerPokemon = {
                ...playerData,
                hp: playerData.maxHp,
                currentHp: playerData.maxHp
            };

            // ì  í¬ì¼“ëª¬ ëœë¤ ì„ íƒ
            const enemyKeys = Object.keys(pokemonData).filter(k => k !== selectedPokemon);
            const enemyKey = enemyKeys[Math.floor(Math.random() * enemyKeys.length)];
            const enemyData = pokemonData[enemyKey];
            enemyPokemon = {
                ...enemyData,
                hp: enemyData.maxHp,
                currentHp: enemyData.maxHp
            };

            // UI ì—…ë°ì´íŠ¸
            document.getElementById('playerSprite').textContent = playerPokemon.sprite;
            document.getElementById('playerName').textContent = playerPokemon.name;
            document.getElementById('enemySprite').textContent = enemyPokemon.sprite;
            document.getElementById('enemyName').textContent = 'ì•¼ìƒì˜ ' + enemyPokemon.name;

            updateHP();
            healCount = 3;

            // í™”ë©´ ì „í™˜
            document.querySelector('.start-screen').classList.remove('active');
            document.querySelector('.battle-screen').classList.add('active');
        }

        function updateHP() {
            const playerPercent = (playerPokemon.currentHp / playerPokemon.hp) * 100;
            const enemyPercent = (enemyPokemon.currentHp / enemyPokemon.hp) * 100;

            const playerHpBar = document.getElementById('playerHp');
            const enemyHpBar = document.getElementById('enemyHp');

            playerHpBar.style.width = playerPercent + '%';
            playerHpBar.textContent = Math.max(0, playerPokemon.currentHp) + '/' + playerPokemon.hp;
            
            enemyHpBar.style.width = enemyPercent + '%';
            enemyHpBar.textContent = Math.max(0, enemyPokemon.currentHp) + '/' + enemyPokemon.hp;

            // HP ìƒ‰ìƒ ë³€ê²½
            updateHpColor(playerHpBar, playerPercent);
            updateHpColor(enemyHpBar, enemyPercent);
        }

        function updateHpColor(bar, percent) {
            bar.classList.remove('low', 'critical');
            if (percent < 20) {
                bar.classList.add('critical');
            } else if (percent < 50) {
                bar.classList.add('low');
            }
        }

        function showMessage(msg) {
            document.getElementById('battleMessage').textContent = msg;
        }

        function playerAttack() {
            const damage = playerPokemon.attack + Math.floor(Math.random() * 10);
            enemyPokemon.currentHp -= damage;
            
            document.getElementById('enemySprite').classList.add('attack-animation');
            setTimeout(() => {
                document.getElementById('enemySprite').classList.remove('attack-animation');
            }, 500);

            showMessage(`${playerPokemon.name}ì˜ ê³µê²©! ${damage}ì˜ ë°ë¯¸ì§€ë¥¼ ì…í˜”ë‹¤!`);
            updateHP();

            if (checkBattleEnd()) return;
            
            setTimeout(enemyTurn, 1500);
        }

        function playerDefend() {
            isDefending = true;
            showMessage(`${playerPokemon.name}ì€(ëŠ”) ë°©ì–´ íƒœì„¸ë¥¼ ì·¨í–ˆë‹¤!`);
            setTimeout(enemyTurn, 1500);
        }

        function playerHeal() {
            if (healCount <= 0) {
                showMessage('íšŒë³µì•½ì„ ëª¨ë‘ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤!');
                return;
            }

            healCount--;
            const healAmount = 30;
            playerPokemon.currentHp = Math.min(playerPokemon.hp, playerPokemon.currentHp + healAmount);
            
            showMessage(`${playerPokemon.name}ì€(ëŠ”) ${healAmount}ë§Œí¼ íšŒë³µí–ˆë‹¤! (ë‚¨ì€ íšŒë³µ: ${healCount})`);
            updateHP();

            setTimeout(enemyTurn, 1500);
        }

        function playerSpecial() {
            const damage = playerPokemon.attack * 2 + Math.floor(Math.random() * 15);
            enemyPokemon.currentHp -= damage;
            
            document.getElementById('enemySprite').classList.add('attack-animation');
            setTimeout(() => {
                document.getElementById('enemySprite').classList.remove('attack-animation');
            }, 500);

            showMessage(`${playerPokemon.name}ì˜ í•„ì‚´ê¸°! ê°•ë ¥í•œ ê³µê²©ìœ¼ë¡œ ${damage}ì˜ ë°ë¯¸ì§€!`);
            updateHP();

            if (checkBattleEnd()) return;
            
            setTimeout(enemyTurn, 1500);
        }

        function enemyTurn() {
            const action = Math.random();
            let damage;

            if (action < 0.7) {
                damage = enemyPokemon.attack + Math.floor(Math.random() * 10);
                if (isDefending) {
                    damage = Math.floor(damage / 2);
                    showMessage(`${enemyPokemon.name}ì˜ ê³µê²©! ë°©ì–´ë¡œ ${damage}ì˜ ë°ë¯¸ì§€ë§Œ ë°›ì•˜ë‹¤!`);
                } else {
                    showMessage(`${enemyPokemon.name}ì˜ ê³µê²©! ${damage}ì˜ ë°ë¯¸ì§€ë¥¼ ë°›ì•˜ë‹¤!`);
                }
                playerPokemon.currentHp -= damage;
                
                document.getElementById('playerSprite').classList.add('attack-animation');
                setTimeout(() => {
                    document.getElementById('playerSprite').classList.remove('attack-animation');
                }, 500);
            } else {
                showMessage(`${enemyPokemon.name}ì€(ëŠ”) í˜ì„ ëª¨ìœ¼ê³  ìˆë‹¤...`);
            }

            isDefending = false;
            updateHP();
            checkBattleEnd();
        }

        function checkBattleEnd() {
            if (enemyPokemon.currentHp <= 0) {
                endBattle(true);
                return true;
            }
            if (playerPokemon.currentHp <= 0) {
                endBattle(false);
                return true;
            }
            return false;
        }

        function endBattle(won) {
            document.querySelector('.battle-screen').classList.remove('active');
            const resultScreen = document.querySelector('.result-screen');
            resultScreen.classList.add('active');

            if (won) {
                resultScreen.classList.add('win');
                resultScreen.classList.remove('lose');
                document.getElementById('resultTitle').textContent = 'ğŸ‰ ìŠ¹ë¦¬! ğŸ‰';
                document.getElementById('resultMessage').textContent = 
                    `ì¶•í•˜í•©ë‹ˆë‹¤! ì•¼ìƒì˜ ${enemyPokemon.name}ì„(ë¥¼) ë¬¼ë¦¬ì³¤ìŠµë‹ˆë‹¤!`;
            } else {
                resultScreen.classList.add('lose');
                resultScreen.classList.remove('win');
                document.getElementById('resultTitle').textContent = 'ğŸ˜¢ íŒ¨ë°°... ğŸ˜¢';
                document.getElementById('resultMessage').textContent = 
                    `${playerPokemon.name}ì€(ëŠ”) ì“°ëŸ¬ì¡ŒìŠµë‹ˆë‹¤... ë‹¤ì‹œ ë„ì „í•´ë³´ì„¸ìš”!`;
            }
        }

        function restartGame() {
            document.querySelector('.result-screen').classList.remove('active');
            document.querySelector('.start-screen').classList.add('active');
            document.querySelectorAll('.pokemon-card').forEach(c => c.classList.remove('selected'));
            document.querySelector('.start-btn').disabled = true;
            selectedPokemon = null;
        }
    </script>
</body>
</html>
